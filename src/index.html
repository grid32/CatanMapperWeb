<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="mobile-web-app-capable" content="yes">

		<title>Catan Random Map Generator</title>

		<script src="./js/sprite.js"></script>
		<script src="./js/index.js"></script>
		<script src="./js/map.js"></script>

		<style>
			canvas
			{
				display: block;
				position: absolute;
				margin: auto;
				top: 0;
				bottom: 0;
				left: 0;
				right: 0;
			}
		</style>
	</head>
	<body>

	</body>
	<script>
		var mapCanvas, scaledMap, ctx;

		mapCanvas = document.createElement("canvas");
		scaledMap = document.createElement("canvas");

		width = window.innerWidth;
		height = window.innerHeight;

		if(height > width)
		{
			height /= 2;
			scaledMap.style.top = height + "px";
			scaledMap.style.left = "10px";
		}
		else
		{
			width /= 2;
			scaledMap.style.left = width + "px";
			scaledMap.style.top = "10px";
		}

		ctx = mapCanvas.getContext("2d");

		document.body.appendChild(scaledMap);

		var img = new Image();
		img.onload = function()
		{
			initSprites(this);
			run();
		}

		img.src = "../res/sheet.png";

		function run()
		{
			var mapWidth = 5,
				mapHeight = 5;
			update(mapCanvas, scaledMap, width, height, mapWidth, mapHeight);	
		}

		function render(mapCanvas, scaledMap, width, height, mapWidth, mapHeight)
		{
			
			mapCanvas.width = s_desert.width * mapWidth;
			mapCanvas.height = ((s_desert.height - (0.246 * s_desert.height)) * (mapHeight - 1)) + s_desert.height;
			drawMap(mapHeight, mapWidth);

			var scaledCtx = scaledMap.getContext("2d");
			scaledMap.width = width - 20;
			scaledMap.height = height - 20;
			scaledCtx.drawImage(mapCanvas, 	0, 0, mapCanvas.width, mapCanvas.height, 
											0, 0, scaledMap.width, scaledMap.height);
		}

		function update(mapCanvas, scaledMap, width, height, mapWidth, mapHeight)
		{
			render(mapCanvas, scaledMap, width, height, mapWidth, mapHeight);
		}
	</script>
</html>